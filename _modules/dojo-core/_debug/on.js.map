{"version":3,"file":"on.js","sourceRoot":"","sources":["on.ts"],"names":["emit","on"],"mappings":"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","sourcesContent":["import { Handle, EventObject } from './interfaces';\nimport { createHandle, createCompositeHandle } from './lang';\nimport Evented from './Evented';\n\nexport interface EventCallback {\n\t(event: EventObject): void;\n}\n\nexport interface EventEmitter {\n\ton(event: string, listener: EventCallback): EventEmitter;\n\tremoveListener(event: string, listener: EventCallback): EventEmitter;\n}\n\nexport interface EventTarget {\n\taccessKey?: string;\n\taddEventListener(event: string, listener: EventCallback, capture?: boolean): void;\n\tremoveEventListener(event: string, listener: EventCallback, capture?: boolean): void;\n}\n\nexport interface ExtensionEvent {\n\t(target: any, listener: EventCallback, capture?: boolean): Handle;\n}\n\ninterface DOMEventObject extends EventObject {\n\tbubbles: boolean;\n\tcancelable: boolean;\n}\n\nexport function emit(target: EventTarget, event: EventObject): boolean;\nexport function emit(target: EventEmitter, event: EventObject): boolean;\nexport function emit(target: Evented, event: EventObject): boolean;\nexport function emit(target: any, event: EventObject): boolean {\n\tif (target.dispatchEvent && target.ownerDocument && target.ownerDocument.createEvent) {\n\t\tlet nativeEvent = target.ownerDocument.createEvent('HTMLEvents');\n\t\tnativeEvent.initEvent(\n\t\t\tevent.type,\n\t\t\tBoolean((<DOMEventObject>event).bubbles),\n\t\t\tBoolean((<DOMEventObject>event).cancelable)\n\t\t);\n\n\t\tfor (let key in event) {\n\t\t\tif (!(key in nativeEvent)) {\n\t\t\t\tnativeEvent[key] = (<any>event)[key];\n\t\t\t}\n\t\t}\n\n\t\treturn target.dispatchEvent(nativeEvent);\n\t}\n\n\tif (target.emit) {\n\t\tif (target.removeListener) {\n\t\t\ttarget.emit(event.type, event);\n\t\t\treturn false;\n\t\t}\n\t\telse if (target.on) {\n\t\t\ttarget.emit(event);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tthrow new Error('Target must be an event emitter');\n}\n\nexport default function on(target: EventTarget, type: string, listener: EventCallback, capture?: boolean): Handle;\nexport default function on(target: EventTarget, type: ExtensionEvent, listener: EventCallback, capture?: boolean): Handle;\nexport default function on(target: EventTarget, type: (string | ExtensionEvent)[], listener: EventCallback, capture?: boolean): Handle;\nexport default function on(target: EventEmitter, type: string, listener: EventCallback): Handle;\nexport default function on(target: EventEmitter, type: ExtensionEvent, listener: EventCallback): Handle;\nexport default function on(target: EventEmitter, type: (string | ExtensionEvent)[], listener: EventCallback): Handle;\nexport default function on(target: Evented, type: string, listener: EventCallback): Handle;\nexport default function on(target: Evented, type: ExtensionEvent, listener: EventCallback): Handle;\nexport default function on(target: Evented, type: (string | ExtensionEvent)[], listener: EventCallback): Handle;\nexport default function on(target: any, type: any, listener: any, capture?: boolean): Handle {\n\tif (type.call) {\n\t\treturn type.call(this, target, listener, capture);\n\t}\n\n\tif (Array.isArray(type)) {\n\t\tlet handles: Handle[] = type.map(function (type: string): Handle {\n\t\t\treturn on(target, type, listener, capture);\n\t\t});\n\n\t\treturn createCompositeHandle(...handles);\n\t}\n\n\tconst callback = function () {\n\t\tlistener.apply(this, arguments);\n\t}\n\n\tif (target.addEventListener && target.removeEventListener) {\n\t\ttarget.addEventListener(type, callback, capture);\n\t\treturn createHandle(function () {\n\t\t\ttarget.removeEventListener(type, callback, capture);\n\t\t});\n\t}\n\n\tif (target.on) {\n\t\tif (target.removeListener) {\n\t\t\ttarget.on(type, callback);\n\t\t\treturn createHandle(function () {\n\t\t\t\ttarget.removeListener(type, callback);\n\t\t\t});\n\t\t}\n\t\telse if (target.emit) {\n\t\t\treturn target.on(type, listener);\n\t\t}\n\t}\n\n\tthrow new TypeError('Unknown event emitter object');\n}\n"]}